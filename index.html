<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Equiz • Demo Produtos</title>
<style>
body{font-family:system-ui,-apple-system,Segoe UI,Roboto;color:#111;background:#fff;margin:0}
.wrap{max-width:920px;margin:0 auto;padding:20px}
h1{font-size:22px;margin:10px 0}
.controls{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0 16px}
select,button,input{padding:10px 12px;border:1px solid #e3e5ea;border-radius:10px}
.grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
@media(min-width:720px){.grid{grid-template-columns:repeat(3,1fr)}}
.item{border:1px solid #e3e5ea;border-radius:14px;overflow:hidden;background:#fff;display:flex;flex-direction:column}
img{width:100%;aspect-ratio:3/4;object-fit:cover;background:#f4f5f8}
.itxt{padding:10px;display:flex;flex-direction:column;gap:6px}
.small{font-size:12px;color:#666}
.cta{display:inline-block;margin-top:6px;padding:8px 10px;background:#111;color:#fff;border-radius:10px;text-decoration:none;text-align:center}
</style>
</head>
<body>
<div class="wrap">
  <h1>Equiz • Produtos por Arquétipo</h1>
  <div class="controls">
    <label>Arquétipo
      <select id="arch">
        <option>Soberana</option>
        <option>Visionária</option>
        <option>Romântica</option>
        <option selected>Eterna</option>
      </select>
    </label>
    <button id="load">Carregar</button>
    <input id="api" placeholder="URL da API (ex: https://seu.run.app)" style="flex:1">
  </div>
  <div id="out" class="grid"></div>
</div>
<script>
const $=s=>document.querySelector(s);
$("#api").value = location.origin.includes("localhost") ? "http://localhost:8080" : location.origin;

async function load(){
  const arch = $("#arch").value;
  const base = $("#api").value.replace(/\/$/,"");
  const url = `${base}/products?arch=${encodeURIComponent(arch)}&limit=12`;
  const res = await fetch(url);
  const data = await res.json();
  const html = (data.items||[]).map(it=>`
    <article class="item">
      <img src="${it.img}" alt="${it.title}">
      <div class="itxt">
        <strong>${it.title}</strong>
        <div class="small">${it.price||""}</div>
        <div class="small">${it.benefit||""}</div>
        <a class="cta" href="https://www.anitavoss.com.br/${it.slug}" target="_blank">Ver na loja</a>
      </div>
    </article>
  `).join("");
  $("#out").innerHTML = html || "<p>Nenhum item.</p>";
}
$("#load").onclick = load;
load();
</script>
</body>
</html>